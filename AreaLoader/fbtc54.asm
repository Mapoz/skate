;***************************************************************
;* TMS320C54x C/C++ Codegen                  PC Version 3.831  *
;* Date/Time created: Thu Apr 17 15:15:23 2008                 *
;***************************************************************
	.mmregs
FP	.set	AR7
	.c_mode
	.file	"fbtc54.c"

	.sect	".cinit"
	.align	1
	.field  	IR_1,16
	.field  	_theMessage+0,16
	.field  	0,16			; _theMessage[0] @ 0
IR_1:	.set	1

	.sect	".text"
	.global	_theMessage
	.bss	_theMessage,2064,0,0
	.sym	_theMessage,_theMessage, 62, 2, 33024,, 2064

	.sect	".cinit"
	.align	1
	.field  	1,16
	.field  	_m_ProtocolStatusWord+0,16
	.field  	0,16			; _m_ProtocolStatusWord @ 0

	.sect	".text"
	.bss	_m_ProtocolStatusWord,1,0,0
	.sym	_m_ProtocolStatusWord,_m_ProtocolStatusWord, 14, 3, 16
;	c:\program files\ti\c5400\cgtools\bin\acp500.exe -@C:\Temp\TI1928_4 

	.sect	".text"
	.global	_main
	.sym	_main,_main, 36, 2, 0
	.func	73

;***************************************************************
;* FUNCTION DEF: _main                                         *
;***************************************************************
_main:
	.line	1
;----------------------------------------------------------------------
;  73 | int main (void) {                                                      
;  75 | TARGET_INITIALIZE();                                                   
;----------------------------------------------------------------------
        FRAME     #-1
	.line	5
;----------------------------------------------------------------------
;  77 | FlashEnable();                                                         
;----------------------------------------------------------------------
        CALL      #_FlashEnable         ; |77| 
        ; call occurs [#_FlashEnable] ; |77| 
	.line	7
;----------------------------------------------------------------------
;  79 | FLASH_WAITS();                                                         
;----------------------------------------------------------------------
        CALL      #_dspInitFl           ; |79| 
        ; call occurs [#_dspInitFl] ; |79| 
	.line	9
;----------------------------------------------------------------------
;  81 | SetPage(0);                                                            
;----------------------------------------------------------------------
        CALLD     #_SetPage             ; |81| 
        NOP
        LD        #0,A
        ; call occurs [#_SetPage] ; |81| 
	.line	11
;----------------------------------------------------------------------
;  83 | InitFlash();                                                           
;  86 | for(;;) {                                                              
;----------------------------------------------------------------------
        CALL      #_InitFlash           ; |83| 
        ; call occurs [#_InitFlash] ; |83| 
L1:    
	.line	17
;----------------------------------------------------------------------
;  89 | doMessageProc();                                                       
;----------------------------------------------------------------------
        CALL      #_doMessageProc       ; |89| 
        ; call occurs [#_doMessageProc] ; |89| 
	.line	20
;----------------------------------------------------------------------
;  92 | doCommand(theMessage);                                                 
;----------------------------------------------------------------------
        CALLD     #_doCommand           ; |92| 
        LD        #_theMessage,A
        ; call occurs [#_doCommand] ; |92| 
	.line	21
        B         L1                    ; |93| 
        ; branch occurs ; |93| 
	.endfunc	94,000000000h,1



	.sect	".text"
	.global	_doMessageProc
	.sym	_doMessageProc,_doMessageProc, 32, 2, 0
	.func	111

;***************************************************************
;* FUNCTION DEF: _doMessageProc                                *
;***************************************************************
_doMessageProc:
	.line	1
;----------------------------------------------------------------------
; 111 | void doMessageProc (void) {                                            
;----------------------------------------------------------------------
	.sym	_FoolTheOptimizer,0, 4, 1, 16
        FRAME     #-1
        NOP
	.line	8
;----------------------------------------------------------------------
; 118 | volatile int FoolTheOptimizer = 0;                                     
;----------------------------------------------------------------------
        ST        #0,*SP(0)             ; |118| 
	.line	9
        FRAME     #1
        RET
        ; return occurs
	.endfunc	119,000000000h,1



	.sect	".text"
	.global	_GetProtocolVersionID
	.sym	_GetProtocolVersionID,_GetProtocolVersionID, 46, 2, 0
	.func	121

;***************************************************************
;* FUNCTION DEF: _GetProtocolVersionID                         *
;***************************************************************
_GetProtocolVersionID:
	.line	1
;----------------------------------------------------------------------
; 121 | u16 GetProtocolVersionID (void) {                                      
;----------------------------------------------------------------------
	.line	2
;----------------------------------------------------------------------
; 122 | return ((u16)COMMPROTOCOLVERSION);                                     
;----------------------------------------------------------------------
        LD        #3,A
	.line	3
        RET       ; |122| 
        ; return occurs ; |122| 
	.endfunc	123,000000000h,0



	.sect	".text"
	.global	_GetProtocolStatusWord
	.sym	_GetProtocolStatusWord,_GetProtocolStatusWord, 46, 2, 0
	.func	125

;***************************************************************
;* FUNCTION DEF: _GetProtocolStatusWord                        *
;***************************************************************
_GetProtocolStatusWord:
	.line	1
;----------------------------------------------------------------------
; 125 | u16 GetProtocolStatusWord (void) {                                     
;----------------------------------------------------------------------
	.line	2
;----------------------------------------------------------------------
; 126 | return (m_ProtocolStatusWord);                                         
;----------------------------------------------------------------------
        LD        *(_m_ProtocolStatusWord),A
	.line	3
        RET       ; |126| 
        ; return occurs ; |126| 
	.endfunc	127,000000000h,0



	.sect	".text"
	.global	_FlashEnable
	.sym	_FlashEnable,_FlashEnable, 32, 2, 0
	.func	130
;----------------------------------------------------------------------
; 130 | void FlashEnable()                                                     
;----------------------------------------------------------------------

;***************************************************************
;* FUNCTION DEF: _FlashEnable                                  *
;***************************************************************
_FlashEnable:
	.line	2
        NOP
	.line	3
;----------------------------------------------------------------------
; 132 | port4 |= FLASHE_BIT;                                                   
;----------------------------------------------------------------------
        PORTR     04H,*(AL)             ; |132| 
        OR        #32,A,A               ; |132| 
        PORTW     *(AL),04H             ; |132| 
	.line	4
        RET
        ; return occurs
	.endfunc	133,000000000h,0



	.sect	".text"
	.global	_FlashDisable
	.sym	_FlashDisable,_FlashDisable, 32, 2, 0
	.func	135
;----------------------------------------------------------------------
; 135 | void FlashDisable()                                                    
;----------------------------------------------------------------------

;***************************************************************
;* FUNCTION DEF: _FlashDisable                                 *
;***************************************************************
_FlashDisable:
	.line	2
        NOP
	.line	3
;----------------------------------------------------------------------
; 137 | port4 &= ~FLASHE_BIT;                                                  
;----------------------------------------------------------------------
        PORTR     04H,*(AL)             ; |137| 
        AND       #65503,A,A            ; |137| 
        PORTW     *(AL),04H             ; |137| 
	.line	4
        RET
        ; return occurs
	.endfunc	138,000000000h,0



	.sect	".text"
	.global	_SendI4ToHost
	.sym	_SendI4ToHost,_SendI4ToHost, 32, 2, 0
	.func	140

;***************************************************************
;* FUNCTION DEF: _SendI4ToHost                                 *
;***************************************************************
_SendI4ToHost:
	.line	1
;----------------------------------------------------------------------
; 140 | void SendI4ToHost (u16 cmd, long val) {                                
;----------------------------------------------------------------------
;* A     assigned to _cmd
	.sym	_cmd,0, 14, 17, 16
	.sym	_val,2, 5, 9, 32
	.sym	_cmd,0, 14, 1, 16
        FRAME     #-1
        NOP
        STL       A,*SP(0)
	.line	2
;----------------------------------------------------------------------
; 141 | theMessage[CMDINDEX]   = cmd;                                          
;----------------------------------------------------------------------
        MVDK      *SP(0),*(_theMessage) ; |141| 
	.line	3
;----------------------------------------------------------------------
; 142 | theMessage[ARGINDEX+0] = (u16)(val >> 16);                             
;----------------------------------------------------------------------
        SSBX      SXM
        NOP
        DLD       *SP(2),A
        SFTA      A,#-16,A              ; |142| 
        STL       A,*(_theMessage+1)    ; |142| 
	.line	4
;----------------------------------------------------------------------
; 143 | theMessage[ARGINDEX+1] = (u16)(val & 0x0000ffff);                      
;----------------------------------------------------------------------
        RSBX      SXM
        DLD       *SP(2),B              ; |143| 
        LD        #65535,A
        AND       B,A                   ; |143| 
        STL       A,*(_theMessage+2)    ; |143| 
	.line	5
        FRAME     #1
        RET
        ; return occurs
	.endfunc	144,000000000h,1



	.sect	".text"
	.global	_SendI2ToHost
	.sym	_SendI2ToHost,_SendI2ToHost, 32, 2, 0
	.func	146

;***************************************************************
;* FUNCTION DEF: _SendI2ToHost                                 *
;***************************************************************
_SendI2ToHost:
	.line	1
;----------------------------------------------------------------------
; 146 | void SendI2ToHost (u16 cmd, u16 val) {                                 
;----------------------------------------------------------------------
;* A     assigned to _cmd
	.sym	_cmd,0, 14, 17, 16
	.sym	_val,2, 14, 9, 16
	.sym	_cmd,0, 14, 1, 16
        FRAME     #-1
        NOP
        STL       A,*SP(0)
	.line	2
;----------------------------------------------------------------------
; 147 | theMessage[CMDINDEX]   = cmd;                                          
;----------------------------------------------------------------------
        MVDK      *SP(0),*(_theMessage) ; |147| 
	.line	3
;----------------------------------------------------------------------
; 148 | theMessage[ARGINDEX+0] = val;                                          
;----------------------------------------------------------------------
        MVDK      *SP(2),*(_theMessage+1) ; |148| 
	.line	4
        FRAME     #1
        RET
        ; return occurs
	.endfunc	149,000000000h,1



	.sect	".text"
	.global	_SetErrorBits
	.sym	_SetErrorBits,_SetErrorBits, 32, 2, 0
	.func	154

;***************************************************************
;* FUNCTION DEF: _SetErrorBits                                 *
;***************************************************************
_SetErrorBits:
	.line	1
;----------------------------------------------------------------------
; 154 | void SetErrorBits (u16 x) {                                            
;----------------------------------------------------------------------
;* A     assigned to _x
	.sym	_x,0, 14, 17, 16
	.sym	_x,0, 14, 1, 16
        FRAME     #-1
        NOP
        STL       A,*SP(0)
	.line	2
;----------------------------------------------------------------------
; 155 | m_ProtocolStatusWord &= ~(0x000f);                                     
;----------------------------------------------------------------------
        ANDM      #65520,*(_m_ProtocolStatusWord) ; |155| 
	.line	3
;----------------------------------------------------------------------
; 156 | m_ProtocolStatusWord |= ((x) & 0x000f);                                
;----------------------------------------------------------------------
        LD        #15,A
        AND       *SP(0),A              ; |156| 
        OR        *(_m_ProtocolStatusWord),A ; |156| 
        STL       A,*(_m_ProtocolStatusWord)
	.line	4
        FRAME     #1
        RET
        ; return occurs
	.endfunc	157,000000000h,1


;***************************************************************
;* UNDEFINED EXTERNAL REFERENCES                               *
;***************************************************************
	.global	_doCommand
	.global	_InitFlash
	.global	_dspInitFl
	.global	_SetPage

;***************************************************************
;* TYPE INFORMATION                                            *
;***************************************************************
	.sym	_u16, 0, 14, 13, 16
	.sym	_u16, 0, 14, 13, 16
